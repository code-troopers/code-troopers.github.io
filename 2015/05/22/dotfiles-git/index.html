
<!doctype html >
<html class="no-js" lang="fr-fr" itemscope itemtype="http://schema.org/Organization">

<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title> git : quelques astuces de configuration pour vos dotfiles &middot;  Code-Troopers - Vous avez une idée, nous la réalisons</title>
  <meta property="fb:app_id" content="432735746865877"/>

  <meta property="og:title" content=" git : quelques astuces de configuration pour vos dotfiles &middot;  Code-Troopers - Vous avez une idée, nous la réalisons" />
  <meta property="og:site_name" content="Code-Troopers - Vous avez une idée, nous la réalisons" />
  <meta property="og:url" content="https://code-troopers.com/2015/05/22/dotfiles-git/" />
  <meta property="og:image" content="https://code-troopers.com//images/banner/logo-banner.png"/>

  
  <meta property="og:type" content="article" />
  <meta property="og:article:published_time" content="2015-05-22T00:00:00Z" />
  <meta property="og:article:tag" content="git" />
  <meta property="og:article:tag" content="gitconfig" />
  <meta property="og:article:tag" content="hook" />
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:site" content="@codetroopers" />
  <meta name="twitter:creator" content="@codetroopers" />
  <meta name="twitter:title" content="git : quelques astuces de configuration pour vos dotfiles" />
  <meta name="twitter:url" content="https://code-troopers.com/2015/05/22/dotfiles-git/" />

  
  <meta name="twitter:description" content="Cet article est le deuxième de la série des dotfiles. Voir l&rsquo;article sur vimrc. Nous allons ici aborder quelques configurations indispensables de git. La base Si vous utilisez git, vous avez forcément fait des commandes de base pour rentrer votre nom et votre email (indispensable pour pusher vos commits) $ git config --global user.name &quot;Jango Fett&quot; $ git config --global user.email &quot;jango.fett@code-troopers.com&quot; Ceci a pour but d&rsquo;écrire dans votre fichier ~/.gitconfig ces simples lignes : [user] name = Jango Fett email = jango.fett@code-troopers.com Un peu de couleurs C&rsquo;est toujours important d&rsquo;avoir de la couleur, ça donne bonne mine, ça rend joyeux mais surtout ça aide à la lisibilité." />
  <meta name="twitter:image" content="https://code-troopers.com//images/banner/ohmyzsh-banner.png" />
  <meta name="description" content="Cet article est le deuxième de la série des dotfiles. Voir l&rsquo;article sur vimrc. Nous allons ici aborder quelques configurations indispensables de git. La base Si vous utilisez git, vous avez forcément fait des commandes de base pour rentrer votre nom et votre email (indispensable pour pusher vos commits) $ git config --global user.name &quot;Jango Fett&quot; $ git config --global user.email &quot;jango.fett@code-troopers.com&quot; Ceci a pour but d&rsquo;écrire dans votre fichier ~/.gitconfig ces simples lignes : [user] name = Jango Fett email = jango.fett@code-troopers.com Un peu de couleurs C&rsquo;est toujours important d&rsquo;avoir de la couleur, ça donne bonne mine, ça rend joyeux mais surtout ça aide à la lisibilité." />
  <meta property="og:description" content="Cet article est le deuxième de la série des dotfiles. Voir l&rsquo;article sur vimrc. Nous allons ici aborder quelques configurations indispensables de git. La base Si vous utilisez git, vous avez forcément fait des commandes de base pour rentrer votre nom et votre email (indispensable pour pusher vos commits) $ git config --global user.name &quot;Jango Fett&quot; $ git config --global user.email &quot;jango.fett@code-troopers.com&quot; Ceci a pour but d&rsquo;écrire dans votre fichier ~/.gitconfig ces simples lignes : [user] name = Jango Fett email = jango.fett@code-troopers.com Un peu de couleurs C&rsquo;est toujours important d&rsquo;avoir de la couleur, ça donne bonne mine, ça rend joyeux mais surtout ça aide à la lisibilité."/>
  

  <meta name="p:domain_verify" content="fc173d84e3a4de948ed4bda2908afd3e"/>
  <meta name="HandheldFriendly" content="True" />
  <meta name="MobileOptimized" content="320" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  
  

  
  <link href="https://code-troopers.com/index.xml" rel="alternate" type="application/rss+xml" title="Code-Troopers - Vous avez une idée, nous la réalisons" />
  

  
  <link rel="canonical" href="https://code-troopers.com/2015/05/22/dotfiles-git/" />

  
  <script type="application/ld+json">
  {
    "@context": "http://schema.org",
    "@type": "Article",
    "headline": "git : quelques astuces de configuration pour vos dotfiles",
    "author": {
      "@type": "Person",
      "name": "http://profiles.google.com/?rel=author"
    },
    "datePublished": "2015-05-22",
    "description": "Création de dotfiles pour git : astuces pour .gitconfig, git hook ",
    "wordCount":  738 
  }
  </script>
  

  <link href="/css/style-0b06b9a2ff.css" type="text/css" rel="stylesheet" media="screen,projection"/>
  
  <meta itemprop="name" content="CT-CDGT"/>
  <meta itemprop="name" content="CT-RMLC"/>
  <meta itemprop="name" content="CT-BNCS"/>
  <meta itemprop="name" content="CT-JRPT"/>
  <meta itemprop="name" content="CT-MTBL"/>
  <meta itemprop="name" content="CT-FLCH"/>
  <meta itemprop="name" content="CT-VCMB"/>

  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.1.0/styles/androidstudio.min.css">
  <script src="https://yandex.st/highlightjs/8.0/highlight.min.js"></script>
</head>
<body>
  
        <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-NWLQD2"
                height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
        <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
            j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
        })(window,document,'script','dataLayer','GTM-NWLQD2');</script>
        
        
  <header data-spy="affix" class="affix-top">
    <div class="container">
        <div class="navbar-header" itemscope itemtype="http://schema.org/Organization">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span><i class="fa fa-bars fa-2x"></i></span>
            </button>
            <a itemprop="url" class="navbar-brand" href="/"><img itemprop="logo" class="logo" alt="Code-Troopers logo" title="Code-Troopers logo" src="/images/logo.png">
                <span itemprop="name" class="brand">Code-Troopers</span>
            </a>
        </div>
        <nav class="navbar-collapse collapse">
            <ul class="nav navbar-nav navbar-right">
                <li class="active"><a data-scrollToLink="aboutUs">À propos</a></li>
                <li><a data-scrollToLink="projects">Réalisations</a></li>
                <li><a data-scrollToLink="skills">Compétences</a></li>
                <li><a data-scrollToLink="team">L'équipe</a></li>
                <li><a data-scrollToLink="contact">Contact</a></li>
                <li><a href="/blog/">Blog</a></li>
            </ul>
        </nav>
        
    </div>
</header>


<section>
<div class="header">
  <h1 class="container">
    <a href="/blog/index.html">Le <span>blog</span></a>
  </h1>
</div>
</section>

<section id="post">
        <div class="container">
        <article>
            <div>
		<div class="cover" style="background-image:url(/images/banner/ohmyzsh-banner-big.png)">
                    
                    <div class="date">par Matthieu</div>
                </div>
                <h2><a href="https://code-troopers.com/2015/05/22/dotfiles-git/">git : quelques astuces de configuration pour vos dotfiles</a></h2>
                <span class="label label-info">~4 minute(s) à lire</span>
                
                <ul class="tags">
                
                    <li><a style="color:white;border-color: white" href="https://code-troopers.com//tags/git/">git</a></li>
                
                    <li><a style="color:white;border-color: white" href="https://code-troopers.com//tags/gitconfig/">gitconfig</a></li>
                
                    <li><a style="color:white;border-color: white" href="https://code-troopers.com//tags/hook/">hook</a></li>
                
                </ul>
                
                <div class="content">
                    	

<p>Cet article est le deuxième de la série des <em>dotfiles</em>. Voir l&rsquo;article sur <a href="code-troopers.com/2015/05/15/Dotfiles-vim.html">vimrc</a>. Nous allons ici aborder quelques configurations indispensables de git.</p>

<h1 id="la-base:83bbafdbb7f3dd4e141ab0d9b554e336">La base</h1>

<p>Si vous utilisez git, vous avez forcément fait des commandes de base pour rentrer votre nom et votre email (indispensable pour pusher vos commits)</p>

<pre><code>$ git config --global user.name &quot;Jango Fett&quot;
$ git config --global user.email &quot;jango.fett@code-troopers.com&quot;
</code></pre>

<p>Ceci a pour but d&rsquo;écrire dans votre fichier ~/.gitconfig ces simples lignes :</p>

<pre><code>[user]
    name = Jango Fett
    email = jango.fett@code-troopers.com
</code></pre>

<h1 id="un-peu-de-couleurs:83bbafdbb7f3dd4e141ab0d9b554e336">Un peu de couleurs</h1>

<p>C&rsquo;est toujours important d&rsquo;avoir de la couleur, ça donne bonne mine, ça rend joyeux mais surtout ça aide à la lisibilité. Dans les dernières version de git, la couleur est activée automatiquement, mais vous pouvez toujours la modifier ! Voici un exemple de configuration :</p>

<pre><code>[color &quot;branch&quot;]
    current = yellow reverse
    local = yellow
    remote = green
[color &quot;diff&quot;]
    meta = yellow bold
    frag = magenta bold
    old = red bold
    new = green bold
[color &quot;status&quot;]
    added = yellow
    changed = green
    untracked = cyan
</code></pre>

<div style="text-align:center;margin-bottom:50px">
    <a href="/images/posts/2015-05-22-Dotfiles-git/gitcolours.png" data-lightbox="group-1" title="git avec couleurs personnalisées" class="inlineBoxes">
        <img class="medium" src="/images/posts/2015-05-22-Dotfiles-git/gitcolours.png" alt="git avec couleurs personnalisées"/>
    </a>
</div>

<h1 id="gitignore-global:83bbafdbb7f3dd4e141ab0d9b554e336">gitignore global</h1>

<p>Parfois vous arrivez dans un environnement où personne n&rsquo;utilise IntelliJ, peut-être même que vous voulez cacher le fait que vous utilisez IDEA. Dans ce cas, pas besoin de commiter un .gitignore qui contient <code>.idea</code> et <code>*.iml</code> mettez le plutôt dans <code>~/.gitignore</code>. Pour que ça marche, vous devrez rajouter dans votre <code>~/.gitconfig</code> :</p>

<pre><code>[core]
    excludesfile = ~/.gitignore
</code></pre>

<h1 id="j-3-vim:83bbafdbb7f3dd4e141ab0d9b554e336">J&rsquo;&lt;3 vim</h1>

<p>J&rsquo;aime vim, alors je le met partout. Besoin d&rsquo;un éditeur de texte pour les commits ? vim !</p>

<pre><code>[core]
    editor = vim
</code></pre>

<p>Besoin d&rsquo;un outil pour faire des diff ? vim !</p>

<pre><code>[merge]
    tool = vimdiff
</code></pre>

<h1 id="montre-nous-tes-fichiers:83bbafdbb7f3dd4e141ab0d9b554e336">Montre-nous tes fichiers</h1>

<p>Vous avez créé un nouveau répertoire, ajouté plein de fichiers dedans, et vous revenez en console pour voir ce qu&rsquo;il y a à commiter. Soit un cas d&rsquo;utilisation quotidien ou presque. Sauf que quand vous faîtes <code>git status</code> seul le répertoire apparaît et pas les fichiers à l&rsquo;intérieur ! Pour y remédier :</p>

<pre><code>[status]
    showUntrackedFiles = all
</code></pre>

<div style="text-align:center;margin-bottom:50px">
    <a href="/images/posts/2015-05-22-Dotfiles-git/git-status.png" data-lightbox="group-1" title="git status coloré" class="inlineBoxes">
        <img class="medium" src="/images/posts/2015-05-22-Dotfiles-git/git-status.png" alt="git status coloré"/>
    </a>
</div>

<h1 id="alias:83bbafdbb7f3dd4e141ab0d9b554e336">Alias</h1>

<p>Comme pour les shell, on peut créer des alias de commande. Par exemple :</p>

<pre><code>[alias]
    cp = cherry-pick
    co = checkout
    cl = clone
    ci = commit
    br = branch
</code></pre>

<p>C&rsquo;est plus rapide à taper… un peu, et encore faut s&rsquo;en souvenir que cp ça fait cherry-pick. Mais certaines commandes sont longues et là ça devient encore plus pertinent :</p>

<pre><code>    last = log -1 --stat
    st = status -sb
    unstage = reset HEAD --
    dc = diff --cached
    pr = pull --rebase
    lg = log --graph --pretty=format:'%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %Cblue&lt;%an&gt;%Creset' --abbrev-commit --date=relative --all
</code></pre>

<p>Je vous laisse essayer celles qui ne sont pas explicite ;)</p>

<h1 id="les-hooks:83bbafdbb7f3dd4e141ab0d9b554e336">Les Hooks</h1>

<p>Il y a beaucoup d&rsquo;options et de choses à faire mais je terminerai cet article avec les hooks, qui mériteraient peut-être à eux seuls un article. Un hook −qui se traduit par « crochet »− va intercepter une commande afin de réaliser une action. Par exemple, quand je lance la commande commit, je veux vérifier que tous les tests passent, ou quand je push, je veux mettre à jour automatiquement le ticket jira associé, on peut vraiment tout faire vu qu&rsquo;il s&rsquo;agit juste de scripts à rajouter.</p>

<p>On a d&rsquo;abord besoin de définir le répertoire qui va contenir les hooks. Vous pouvez ajouter dans votre <code>~/.gitconfig</code> :</p>

<pre><code>[init]
    templatedir = ~/.git_template
</code></pre>

<p>Par exemple si vous voulez rajouter un script qui interdit de commiter <code>System.out.println</code>, vous pouvez créer ce fichier : <code>~/.git_template/hooks/pre-commit</code>
J&rsquo;ai récupéré le mien sur <a href="https://github.com/borisguery/git-keywords-checker">https://github.com/borisguery/git-keywords-checker</a> sur lequel j&rsquo;ai juste modifié les deux variables KEYWORDS_REGEX et EXTENSIONS_REGEX. Ce qui donne grosso modo dans le fichier :</p>

<pre><code>5 # Add or remove keywords here
6 KEYWORDS_REGEX=&quot;printStackTrace\(|FIXME|TODO&quot;
7 # Add extensions to check here
8 EXTENSIONS_REGEX=&quot;(.java$|.js$)&quot;
</code></pre>

<p>On interdit de commiter <code>printStackTrace(</code> ou <code>FIXME</code> ou <code>TODO</code> dans les fichiers <code>java</code> ou <code>js</code>.</p>

<div style="text-align:center;margin-bottom:50px">
    <a href="/images/posts/2015-05-22-Dotfiles-git/git-hooks.png" data-lightbox="group-1" title="git hooks pre-commit en action" class="inlineBoxes">
        <img class="medium" src="/images/posts/2015-05-22-Dotfiles-git/git-hooks.png" alt="git hooks pre-commit en action"/>
    </a>
</div>

<p>Oui ça paraît un peu violent d&rsquo;interdire le commit de TODO et FIXME mais on peut passer outre en commitant avec l&rsquo;option <code>--no-verify</code> et au moins on est au courant donc on n&rsquo;oublie pas les actions nécessaires selon les équipes de travail (ajout d&rsquo;un post-it, d&rsquo;une carte trello etc.)</p>

<p>2 petits détails pour que ça marche :</p>

<ul>
<li>Il faut que le script soit exécutable, donc vous pouvez faire <code>chmod +x ~/.git_template/hooks/pre-commit</code></li>
<li>Ce sera actif uniquement sur les nouveaux dépôts, pour activer le hook sur les dépôts existants, vous devez faire un <code>git init</code></li>
</ul>

<p>Si vous voulez d&rsquo;autres exemples de hooks, vous pouvez commencer par jeter un œil aux hooks de <a href="https://github.com/petervanderdoes/git-flow-hooks">git-flow</a></p>

                </div>
<div class="share">
L'article vous a plu ? Partagez-le :
    <ul class="socials">
        <li>
            <a target="_blank" title="Twitter" href="https://twitter.com/share?url=http://code-troopers.comhttps%3a%2f%2fcode-troopers.com%2f2015%2f05%2f22%2fdotfiles-git%2f&text=git%20%3a%20quelques%20astuces%20de%20configuration%20pour%20vos%20dotfiles&via=codetroopers"
                rel="nofollow"
                onclick="javascript:window.open(this.href, '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=400,width=700');return false;">
                <i class="fa fa-twitter-square"></i>
            </a>
        </li>
        <li>
            <a target="_blank" title="Facebook" href="https://www.facebook.com/sharer.php?u=http://code-troopers.comhttps%3a%2f%2fcode-troopers.com%2f2015%2f05%2f22%2fdotfiles-git%2f&t=git%20%3a%20quelques%20astuces%20de%20configuration%20pour%20vos%20dotfiles"
                class="facebook-button" rel="nofollow"
                onclick="javascript:window.open(this.href, '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=500,width=700');return false;">
                <i class="fa fa-facebook-square"></i>
            </a>
        </li>
        <li>
            <a target="_blank" title="Google +" href="https://plus.google.com/share?url=http://code-troopers.comhttps%3a%2f%2fcode-troopers.com%2f2015%2f05%2f22%2fdotfiles-git%2f&hl=fr"
                class="google-button" rel="nofollow"
                onclick="javascript:window.open(this.href, '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=450,width=650');return false;">
                <i class="fa fa-google-plus-square"></i>
            </a>
        </li>
        <li>
            <a target="_blank" title="Linkedin" href="https://www.linkedin.com/shareArticle?mini=true&url=http://code-troopers.comhttps%3a%2f%2fcode-troopers.com%2f2015%2f05%2f22%2fdotfiles-git%2f&title=git%20%3a%20quelques%20astuces%20de%20configuration%20pour%20vos%20dotfiles"
                class="linkedin-button" rel="nofollow"
                onclick="javascript:window.open(this.href, '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=450,width=650');return false;">
                <i class="fa fa-linkedin-square"></i>
            </a>
        </li>
        <li>
            <a target="_blank" title="Envoyer par mail" href="mailto:?subject=git%20%3a%20quelques%20astuces%20de%20configuration%20pour%20vos%20dotfiles&body=http://code-troopers.comhttps%3a%2f%2fcode-troopers.com%2f2015%2f05%2f22%2fdotfiles-git%2f" rel="nofollow">
                <i class="fa fa-envelope"></i>
            </a>
        </li>
    </ul>
</div>
<div style="clear:both"></div>



                <div class="back">
                    <a href="/"><i class="fa fa-arrow-circle-o-up"></i> Retour aux articles</a>
                    <div class="pull-right paginate">
                        
                        <a href="https://code-troopers.com/2015/05/15/dotfiles-vim/"><i class="fa fa-arrow-circle-o-left"></i> Précédent</a>
                        
                        
                        <a href="https://code-troopers.com/2015/06/06/androiddesignlibrary/"><i class="fa fa-arrow-circle-o-right"></i> Suivant</a>
                        
                    </div>
                </div>

                <section id="menu">
                    <ul>
                        
                    </ul>
                </section>

                <div id="disqus_thread"></div>
                <script type="text/javascript">
                     
                    var disqus_shortname = 'codetroopers'; 
		    var disqus_url = window.location.href;
		    if (window.location.protocol != "http:"){
			disqus_url = "http:" + window.location.href.substring(window.location.protocol.length);
		    }

                     
                    (function() {
                        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
                    })();
                </script>
                <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
                <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

            </div>
        </article>
        </div>
    </section>
<footer id="contact">
    <div class="container">
        <div class="row">
            <div class="col-md-6" itemscope itemtype="http://schema.org/Organization">
                <h3>Contact</h3>

                <p>Vous avez besoin de nous pour un projet, contactez-nous sur les réseaux sociaux, par mail à <a
                    href="mailto:contact@code-troopers.com"><meta itemprop="email" content="contact@code-troopers.com">contact@code-troopers.com</a></p>
            </div>
            <div class="col-md-6 simple-social-icons">
                <h3>Réseaux sociaux</h3>
                <ul class="socials">
                    <li><a target="_blank" href="https://twitter.com/codetroopers"><i
                            class="fa fa-twitter-square"></i></a></li>
                    <li><a target="_blank"
                           href="https://www.facebook.com/pages/Code-Troopers/123604307824664"><i
                            class="fa fa-facebook-square"></i></a></li>
                    <li><a target="_blank" href="https://plus.google.com/+Code-troopers" rel="publisher"><i
                            class="fa fa-google-plus-square"></i></a></li>
                    <li><a target="_blank" href="https://github.com/code-troopers"><i
                            class="fa fa-github-square"></i></a></li>
                    <li><a target="_blank" href="/feed.xml"><i
                            class="fa fa-rss-square"></i></a></li>
                </ul>
            </div>
        </div>
        <div class="row">
            <div class="footer-under">
                Made with <i class="fa fa-heart"></i> in Tours -
              © 2017 Code-Troopers - Tous droits réservés
            </div>
						<div class="legals footer-under">
							  Mentions légales : <br>
							  Code-Troopers est une  marque déposée à l'INPI (numéro 4145181).<br>
								Code-Troopers SAS au capital de 560 000€, 49 boulevard Preuilly, 37000 Tours, 830 388 997 RCS Tours. <br>
								Site hébergé par GitHub Inc.
						</div>
        </div>
    </div>
</footer>
<script src="/js/scripts-aa72765cff.js"></script>
</body>

