<!doctype html>
<html lang="fr">
  <head>
  <title>Code-Troopers - SEO et Single Page Application</title>
  <meta name="description" content="">

  
  
    <link href="/main.7e301.css" rel="stylesheet">
  
	<meta charset="utf-8">
	<meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
  <base href="/">
	
	<link rel="apple-touch-icon" sizes="180x180" href="/img/apple-touch-icon.png">
	<link rel="icon" href="/favicon.png">
	<link rel="manifest" href="/manifest.json">
	<link rel="mask-icon" href="/img/safari-pinned-tab.svg" color="#ff4400">
	<meta name="theme-color" content="#fff">

  
  <meta property="og:title" content="SEO et Single Page Application" />
<meta property="og:description" content="Lorsque nous avons commencé à développer We Guide, nous avons pas mal réfléchi à quel framework utiliser pour réaliser la partie front et, du fait de notre expérience, avons choisi Angular. Nous connaissions les problèmes liés aux Single Page Application et au SEO mais nous pensions pouvoir les résoudre facilement par la suite. Au final, c’était un peu plus compliqué que prévu et nous allons expliquer pourquoi dans la suite de cet article." />
<meta property="og:type" content="article" />
<meta property="og:url" content="/2018/09/18/angular-seo/" /><meta property="og:image" content="/img/logo-code-troopers-t%C3%AAte-couleur.png" /><meta property="article:section" content="blog" />
<meta property="article:published_time" content="2018-09-18T00:00:00+00:00" />
<meta property="article:modified_time" content="2018-09-18T00:00:00+00:00" />



  
</head>
  <body class="sans-serif">

    <header>
    <nav>
        
            <a id="id-company" href="/">Code-Troopers</a>
        
            <a id="id-skills" href="#skills">Compétences</a>
        
            <a id="id-portfolio" href="#portfolio">Réalisations</a>
        
            <a id="id-casting" href="https://team.code-troopers.com">L&#39;équipe</a>
        
            <a id="id-blogs" href="/blog">Blog</a>
        
            <a id="id-contact" href="#contact">Contact</a>
        
    </nav>
</header>

    

<section id="blog">
    <div class="wrapper">
        <h1>
            Blog
        </h1>
    </div>

    <section id="article">
        <div class="wrapper">
            <article>
                
                    
                        <img src="/2018/09/18/angular-seo/angularseo-banner_hu9cb3f739bf62c9e4f9c4ce57b137e65a_435145_900x500_fill_q100_h2_box_center_3.webp" width="900" height="500" alt="">
                    
                
                <div class="wrapper-content">
                    <h2>SEO et Single Page Application</h2>
                    
                    <ul class="tags">
                        
                        <li><a href="/tags/seo/">SEO</a></li>
                        
                        <li><a href="/tags/angular/">Angular</a></li>
                        
                    </ul>
                    
                    <div class="content">
                        <div class="paragraph">
<p>Lorsque nous avons commencé à développer <a href="https://www.weguide.fr" target="_blank" rel="noopener">We Guide</a>, nous avons pas mal réfléchi à quel framework utiliser pour réaliser la partie front et, du fait de notre expérience, avons choisi <strong>Angular</strong>.
Nous connaissions les problèmes liés aux <strong>Single Page Application</strong> et au <strong>SEO</strong> mais nous pensions pouvoir les résoudre facilement par la suite.
Au final, c’était un peu plus compliqué que prévu et nous allons expliquer pourquoi dans la suite de cet article.</p>
</div>
<div class="sect1">
<h2 id="_les_balises_meta">Les balises &lt;meta&gt;</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Angular fournit deux services afin de modifier les balises <strong>HTML</strong> destinées au <strong>SEO</strong> lors de l’affichage d’une page, <code>Meta</code> et <code>Title</code> qui, comme leur nom l’indique, permettent de modifier les balises <code>&lt;meta&gt;</code> et <code>&lt;title&gt;</code>.</p>
</div>
<div class="paragraph">
<p>Voici un exemple de service créé pour mettre à jour les balises meta destinées à l’OpenGraph et à Twitter.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">@Injectable({
  providedIn: &#39;root&#39;
})
export class SeoService {

  constructor(private meta: Meta,
              private title: Title) {
  }

  generateTags(config) {
    // default values
    config = {
      title: &#39;Titre de la page&#39;,
      description: &#39;Description de la page par défaut&#39;,
      image: &#39;http://imagepardefaut.com&#39;,
      ...config
    };

    this.meta.updateTag({name: &#39;twitter:card&#39;, content: &#39;summary&#39;});
    this.meta.updateTag({name: &#39;twitter:site&#39;, content: &#39;@twitter&#39;});
    this.meta.updateTag({name: &#39;twitter:title&#39;, content: config.title});
    this.meta.updateTag({name: &#39;twitter:description&#39;, content: config.description});
    this.meta.updateTag({name: &#39;twitter:image&#39;, content: config.image});

    this.meta.updateTag({property: &#39;og:type&#39;, content: &#39;article&#39;});
    this.meta.updateTag({property: &#39;og:site_name&#39;, content: &#39;SiteName&#39;});
    this.meta.updateTag({property: &#39;og:title&#39;, content: config.title});
    this.meta.updateTag({property: &#39;og:description&#39;, content: config.description});
    this.meta.updateTag({property: &#39;og:image&#39;, content: config.image});
    this.meta.updateTag({property: &#39;og:url&#39;, content: `https://monurl/`});

    this.title.setTitle(config.title);
    this.meta.addTags([
      {name: &#39;description&#39;, content: config.description},
      {name: &#39;keywords&#39;, content: config.description},
    ]);
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_le_sitemap">Le Sitemap</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Une autre partie du <strong>SEO</strong> indispensable est le sitemap.
Il permet aux robots de savoir exactement quelles pages indexer.
Problème, sur une application comme <strong>We Guide</strong>, nous ne pouvons pas écrire ce fichier en dur, en effet, des nouveaux guides créent leur profil tous les jours sur la plateforme, ce qui veut dire, une nouvelle url en plus à indexer.</p>
</div>
<div class="paragraph">
<p>Pour remédier à cela c’est assez simple, il faut que le fichier soit dynamique et généré à la volée par votre serveur.
Pour faire cela, il suffit de servir une route <code>/sitemap</code> qui retourne un fichier <strong>XML</strong> généré à l’aide d’appel aux différents services de votre application.</p>
</div>
<div class="paragraph">
<p>Voici un exemple sur une application <strong>Spring Boot</strong> en <strong>Kotlin</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">@Component
class SitemapView(@Autowired val sitemapService: SitemapService) : AbstractView() {
    override fun renderMergedOutputModel(model: MutableMap&lt;String, Any&gt;?,
                                         request: HttpServletRequest?,
                                         response: HttpServletResponse?) {
        response?.contentType = APPLICATION_XML_VALUE
        response?.writer?.append(sitemapService.createSitemap())
    }
}

@RestController
class SitemapController(@Autowired val sitemapView: SitemapView) {
    @GetMapping(&#34;/sitemap&#34;, produces = arrayOf(APPLICATION_XML_VALUE))
    fun generateSiteMap(): SitemapView {
        return sitemapView
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Pour générer le fichier <strong>XML</strong>, nous avons utilisé cette librairie <a href="https://github.com/lgraubner/sitemap-generator" target="_blank" rel="noopener">https://github.com/lgraubner/sitemap-generator</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_le_rendu_côté_serveur">Le rendu côté serveur</h2>
<div class="sectionbody">
<div class="paragraph">
<p>La dernière étape est la plus compliquée.
Il faut ajouter une logique au niveau du serveur front qui, si l’appel vient d’un robot, le redirige vers un service permettant de générer le code <strong>HTML</strong> final de notre page car le problème des robots c’est que un, ils n’aiment pas le javascript (le moteur utilisé n’est pas récent) et deux, ils n’aiment pas attendre.</p>
</div>
<div class="paragraph">
<p>Le service en question que nous avons choisi se nomme <strong>Rendertron</strong> (<a href="https://github.com/GoogleChrome/rendertron" target="_blank" rel="noopener">https://github.com/GoogleChrome/rendertron</a>). Ce n’est rien d’autre qu’un <strong>Google Chrome</strong> headless auquel on envoie l’url de la page que l’on désire et nous renvoie le code <strong>HTML</strong> en réponse.</p>
</div>
<div class="paragraph">
<p>Pour décider si l’on doit faire du rendu côté serveur ou du rendu côté client, nous nous sommes inspirés d’une librairie Java <a href="https://github.com/greengerong/prerender-java" target="_blank" rel="noopener">https://github.com/greengerong/prerender-java</a>.
Cette librairie fournit directement un filtre <strong>HTTP</strong> permettant de rediriger vers une url si le <code>User-Agent</code> est compris dans la liste des robots de crawling.</p>
</div>
<div class="paragraph">
<p>Il nous a suffit de brancher ce filtre au niveau de <strong>Spring Boot</strong> comme ceci :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">@Bean
public FilterRegistrationBean registerSeoFilter() {
    PreRenderSEOFilter seoFilter = new PreRenderSEOFilter();
    FilterRegistrationBean filterRegistrationBean = new FilterRegistrationBean();

    filterRegistrationBean.setFilter(seoFilter);
    filterRegistrationBean.addInitParameter(
        &#34;prerenderServiceUrl&#34;,
        env.getProperty(&#34;application.rendertron.url&#34;)+&#34;/render&#34;);

    filterRegistrationBean.addUrlPatterns(&#34;/*&#34;);

    return filterRegistrationBean;
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_validation">Validation</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Une fois que vous avez fait toutes vos modifications, vous pouvez tester le bon fonctionnement grâce à plusieurs outils :</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://cards-dev.twitter.com/validator" target="_blank" rel="noopener">https://cards-dev.twitter.com/validator</a> : le système de <strong>Twitter</strong> pour vérifier l’aperçu d’un lien quand on le partage dans un tweet.</p>
</li>
<li>
<p><a href="https://search.google.com/search-console" target="_blank" rel="noopener">https://search.google.com/search-console</a> : la <strong>Google Search Console</strong>, l’outil de <strong>Google</strong> vous permet de voir le <strong>HTML</strong> ou même une capture d’écran d’une URL de votre site de la façon dont voit le robot d’indexation de <strong>Google</strong>. Il vous permet aussi de consulter le sitemap et voir si ses urls ont bien été indexées.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Enfin vous n’avez plus qu’à attendre quelques jours que les différents robots passent sur votre site afin de voir les résultats sur les différents moteurs de recherche.</p>
</div>
<div class="paragraph">
<p>Pour <strong>We Guide</strong>, nous sommes actuellement entrain de tester cette amélioration sur notre plateforme de recette et on espère déployer la version de production très prochainement.</p>
</div>
</div>
</div>

                    </div>
                    <div class="content-footer">
                        
                        <ul class="tags float">
                            
                            <li><a href="/tags/seo/">SEO</a></li>
                            
                            <li><a href="/tags/angular/">Angular</a></li>
                            
                        </ul>
                        
                        <section id="author">
                            <div class="date">Rédigé par <span class="author-name">Benjamin</span></div>
                        </section>
                    </div>
                    <div class="share">
                        <span>Partager</span>
                        <ul class="socials">
                            <li>
                                <a target="_blank" title="Facebook"
                                    href="https://www.facebook.com/sharer.php?u=http://code-troopers.com%2f2018%2f09%2f18%2fangular-seo%2f&t=SEO%20et%20Single%20Page%20Application"
                                    class="facebook-button" rel="nofollow"
                                    onclick="javascript:window.open(this.href, '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=500,width=700');return false;">
                                    <svg class="icon-svg facebook-fill-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M14 13.5H16.5L17.5 9.5H14V7.5C14 6.47062 14 5.5 16 5.5H17.5V2.1401C17.1743 2.09685 15.943 2 14.6429 2C11.9284 2 10 3.65686 10 6.69971V9.5H7V13.5H10V22H14V13.5Z"></path></svg>
                                </a>
                            </li>
                            <li>
                                <a target="_blank" title="Twitter"
                                    href="https://twitter.com/share?url=http://code-troopers.com%2f2018%2f09%2f18%2fangular-seo%2f&text=SEO%20et%20Single%20Page%20Application&via=codetroopers"
                                    rel="nofollow"
                                    onclick="javascript:window.open(this.href, '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=400,width=700');return false;">
                                    <svg class="icon-svg twitter-x-fill-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M18.2048 2.25H21.5128L14.2858 10.51L22.7878 21.75H16.1308L10.9168 14.933L4.95084 21.75H1.64084L9.37084 12.915L1.21484 2.25H8.04084L12.7538 8.481L18.2048 2.25ZM17.0438 19.77H18.8768L7.04484 4.126H5.07784L17.0438 19.77Z"></path></svg>
                                </a>
                            </li>
                        </ul>
                    </div>
                    <div style="clear:both"></div>


                    <div class="back">
                        <div class="pagination">
                            
                            <a href="/2018/11/14/android-deobfuscation/" class="previous-page">
                                <div class="arrow"><div class="arrow_box_left arrow_box">
</div></div>
                                Article précédent
                            </a>
                            
                            
                            <a href="/2018/07/09/jq/" class="next-page">
                                Article suivant
                                <div class="arrow"><div class="arrow_box_right arrow_box">
</div></div>
                            </a>
                            
                        </div>
                    </div>

                    <section id="menu">
                        <ul>
                            
                        </ul>
                    </section>

                    <div id="disqus_thread"></div>
                    <script type="text/javascript">
                         
                        var disqus_shortname = 'codetroopers' 
                        var disqus_url = window.location.href
                        if (window.location.protocol != 'http:') {
                            disqus_url = 'http:' + window.location.href.substring(window.location.protocol.length)
                        }

                         
                        (function () {
                            var dsq = document.createElement('script')
                            dsq.type = 'text/javascript'
                            dsq.async = true
                            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq)
                        })()
                    </script>
                    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments
                            powered by Disqus.</a></noscript>
                    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span
                            class="logo-disqus">Disqus</span></a>
                </div>
            </article>
        </div>
    </section>
</section>


    <section id="contact">
    <h1>Contact</h1>
    <div>
        <div>
            <img class="cover" loading="lazy" src="/img/legos_contact.webp" alt="legos" width="100%" height="100%">
        </div>
        <div>
            <h2>Code-Troopers</h2>
            <p>
                26 bis rue Abraham Bosse<br>
                37000 Tours - Fr
            </p>
            <p>
                <a href="mailto:contact@code-troopers.com">contact@code-troopers.com</a>
            </p>
            <p>
                <a class="button" href="tel:+33782287216">07 82 28 72 16</a>
            </p>
        </div>
    </div>

    <h1>Suivez nos actualités</h1>

    <ul class="flex x3">
        <li>
            <a aria-label="Facebook Code-Troopers" href="https://facebook.com/codetroopers37">
                <svg class="icon-svg facebook-fill-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M14 13.5H16.5L17.5 9.5H14V7.5C14 6.47062 14 5.5 16 5.5H17.5V2.1401C17.1743 2.09685 15.943 2 14.6429 2C11.9284 2 10 3.65686 10 6.69971V9.5H7V13.5H10V22H14V13.5Z"></path></svg>
            </a>
        </li>
        <li>
            <a aria-label="Twitter Code-Troopers" href="https://twitter.com/codetroopers">
                <svg class="icon-svg twitter-x-fill-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M18.2048 2.25H21.5128L14.2858 10.51L22.7878 21.75H16.1308L10.9168 14.933L4.95084 21.75H1.64084L9.37084 12.915L1.21484 2.25H8.04084L12.7538 8.481L18.2048 2.25ZM17.0438 19.77H18.8768L7.04484 4.126H5.07784L17.0438 19.77Z"></path></svg>
            </a>
        </li>
        <li>
            <a aria-label="Github Code-Troopers" href="https://github.com/code-troopers">
                <svg class="icon-svg github-fill-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M12.001 2C6.47598 2 2.00098 6.475 2.00098 12C2.00098 16.425 4.86348 20.1625 8.83848 21.4875C9.33848 21.575 9.52598 21.275 9.52598 21.0125C9.52598 20.775 9.51348 19.9875 9.51348 19.15C7.00098 19.6125 6.35098 18.5375 6.15098 17.975C6.03848 17.6875 5.55098 16.8 5.12598 16.5625C4.77598 16.375 4.27598 15.9125 5.11348 15.9C5.90098 15.8875 6.46348 16.625 6.65098 16.925C7.55098 18.4375 8.98848 18.0125 9.56348 17.75C9.65098 17.1 9.91348 16.6625 10.201 16.4125C7.97598 16.1625 5.65098 15.3 5.65098 11.475C5.65098 10.3875 6.03848 9.4875 6.67598 8.7875C6.57598 8.5375 6.22598 7.5125 6.77598 6.1375C6.77598 6.1375 7.61348 5.875 9.52598 7.1625C10.326 6.9375 11.176 6.825 12.026 6.825C12.876 6.825 13.726 6.9375 14.526 7.1625C16.4385 5.8625 17.276 6.1375 17.276 6.1375C17.826 7.5125 17.476 8.5375 17.376 8.7875C18.0135 9.4875 18.401 10.375 18.401 11.475C18.401 15.3125 16.0635 16.1625 13.8385 16.4125C14.201 16.725 14.5135 17.325 14.5135 18.2625C14.5135 19.6 14.501 20.675 14.501 21.0125C14.501 21.275 14.6885 21.5875 15.1885 21.4875C19.259 20.1133 21.9999 16.2963 22.001 12C22.001 6.475 17.526 2 12.001 2Z"></path></svg>
            </a>
        </li>
    </ul>
</section>

<footer>
    <div class="wrapper">
        <a href="#top" class="scroll-to-top">
            <img class="arrow" loading="lazy" src="/img/arrow.webp" alt="arrow">
        </a>
        <img src="/img/footer_logo.webp" alt="logo">
        <div>
            <span>©2014 — 2024 Code-Troopers | <a href="/legals.html">Mentions légales</a></span>
            <span>Design : <a href="https://www.descheval.com/">descheval.com</a> | Développement : Code-Troopers</span>
        </div>
    </div>
</footer>

    
    
      <script src="/main.7e301.js"></script>
    
  </body>
</html>
