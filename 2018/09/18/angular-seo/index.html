
<!doctype html>
<html class="no-js" lang="fr-fr" itemscope itemtype="http://schema.org/Organization">
<head>
  
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
          new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
      'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-NWLQD2');</script>
  
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">

  
  
    
      
    
  

  
  
    
      
    
  

  
  
        
  

  
  
    
  

  <title>SEO et Single Page Application - Code-Troopers Conception d’applications web et mobiles sur-mesure</title>
  <meta name="viewport" content="user-scalable=no,initial-scale=1,maximum-scale=1,minimum-scale=1,width=device-width" />

  <meta property="og:title" content="SEO et Single Page Application - Code-Troopers Conception d’applications web et mobiles sur-mesure" />
  <meta property="og:site_name" content="Code-Troopers" />
  <meta property="og:url" content="https://code-troopers.com/2018/09/18/angular-seo/" />
  <meta property="og:image" content="https://code-troopers.com/images/banner/angularseo-banner.b087.png"/>


  <meta property="og:type" content="website" />


  <meta name="twitter:card" content="summary" />
  <meta name="twitter:site" content="@codetroopers" />
  <meta name="twitter:creator" content="@codetroopers" />
  <meta name="twitter:title" content="SEO et Single Page Application - Code-Troopers Conception d’applications web et mobiles sur-mesure" />
  <meta name="twitter:url" content="https://code-troopers.com/2018/09/18/angular-seo/" />
  <meta name="twitter:image" content="https://code-troopers.com/images/banner/angularseo-banner.b087.png"/>

  <meta name="twitter:description" content="Lorsque nous avons commencé à développer We Guide, nous avons pas mal réfléchi à quel framework utiliser pour réaliser la partie front et, du fait de notre expérience, avons choisi Angular. Nous connaissions les problèmes liés aux Single Page Application et au SEO mais nous pensions pouvoir les résoudre facilement par la suite. Au final, c’était un peu plus compliqué que prévu et nous allons expliquer pourquoi dans la suite de cet article." />
  <meta name="description" content="Lorsque nous avons commencé à développer We Guide, nous avons pas mal réfléchi à quel framework utiliser pour réaliser la partie front et, du fait de notre expérience, avons choisi Angular. Nous connaissions les problèmes liés aux Single Page Application et au SEO mais nous pensions pouvoir les résoudre facilement par la suite. Au final, c’était un peu plus compliqué que prévu et nous allons expliquer pourquoi dans la suite de cet article." />
  <meta property="og:description" content="Lorsque nous avons commencé à développer We Guide, nous avons pas mal réfléchi à quel framework utiliser pour réaliser la partie front et, du fait de notre expérience, avons choisi Angular. Nous connaissions les problèmes liés aux Single Page Application et au SEO mais nous pensions pouvoir les résoudre facilement par la suite. Au final, c’était un peu plus compliqué que prévu et nous allons expliquer pourquoi dans la suite de cet article."/>


  <meta name="p:domain_verify" content="fc173d84e3a4de948ed4bda2908afd3e"/>
  <meta name="HandheldFriendly" content="True" />
  <meta name="MobileOptimized" content="320" />
  <meta name="theme-color" content="#3BCCE5" />


  <link href="https://code-troopers.com/index.xml" rel="alternate" type="application/rss+xml" title="Code-Troopers" />
  <link rel="canonical" href="https://code-troopers.com/2018/09/18/angular-seo/" />
  <link rel="shortcut icon" href="../../../../favicon.ico?v=2" type="image/x-icon">
  <link rel="icon" href="../../../../favicon.ico?v=2" type="image/x-icon">
  <meta itemprop="name" content="Code-Troopers"/><link rel="stylesheet" href="../../../../styles.eef7.css" /><link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.0.3/cookieconsent.min.css" />
  <script src="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.0.3/cookieconsent.min.js"></script>
  <script>
      window.addEventListener("load", function(){
          window.cookieconsent.initialise({
              "palette": {
                  "popup": {
                      "background": "#000"
                  },
                  "button": {
                      "background": "transparent",
                      "text": "#3BCCE5",
                      "border": "#3BCCE5"
                  }
              },
              "content": {
                  "message": "En poursuivant la navigation, vous acceptez l'utilisation de cookies.",
                  "dismiss": "J'ai compris",
                  "link": "En savoir plus"
              }
          })});
  </script>
</head>

<body>

<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NWLQD2"
                  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>



<header>
    <nav>
        <a href="../../../../" class="brand"><img src="data:image/png;base64,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" alt="Code-Troopers"></a>
        
            
            <a href="../../../../#skills" class=" "><span>Compétences</span></a>
            
        
            
            <a href="../../../../#portfolio" class=" "><span>Réalisations</span></a>
            
        
            
            <a href="../../../../#casting" class=" "><span>Casting</span></a>
            
        
            
            <a href="https://team.code-troopers.com" class=" "><span>Les Troopers</span></a>
            
        
            
            <a href="../../../../#contact" class=" "><span>Contact</span></a>
            
        
            
            <a href="../../../../blog/" class=" active  blog"><span>Blog</span></a>
            
        
            
        
    </nav>
    <div class="hiring"><a href="https://team.code-troopers.com/"><img src="/img/hiring.1cd3.png" title="On recrute">On recrute</a></div>
</header>
<section id="blog">
    <div class="wrapper">
        <h1>
            Blog
        </h1>
    </div>

    <section id="article">
        <div class="wrapper">
            <article>
                
                <img src="/images/banner/angularseo-banner.b087.png">
                
                
                
                <div class="wrapper-content">
                    <h2>SEO et Single Page Application</h2>
                    
                    
                    <ul class="tags">
                        
                        <li><a href="../../../../tags/seo/">SEO</a></li>
                        
                        <li><a href="../../../../tags/angular/">Angular</a></li>
                        
                    </ul>
                    
                    <div class="content">
                        <div class="paragraph">
<p>Lorsque nous avons commencé à développer <a href="https://www.weguide.fr" target="_blank" rel="noopener">We Guide</a>, nous avons pas mal réfléchi à quel framework utiliser pour réaliser la partie front et, du fait de notre expérience, avons choisi <strong>Angular</strong>.
Nous connaissions les problèmes liés aux <strong>Single Page Application</strong> et au <strong>SEO</strong> mais nous pensions pouvoir les résoudre facilement par la suite.
Au final, c’était un peu plus compliqué que prévu et nous allons expliquer pourquoi dans la suite de cet article.</p>
</div>
<div class="sect1">
<h2 id="_les_balises_meta">Les balises &lt;meta&gt;</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Angular fournit deux services afin de modifier les balises <strong>HTML</strong> destinées au <strong>SEO</strong> lors de l’affichage d’une page, <code>Meta</code> et <code>Title</code> qui, comme leur nom l’indique, permettent de modifier les balises <code>&lt;meta&gt;</code> et <code>&lt;title&gt;</code>.</p>
</div>
<div class="paragraph">
<p>Voici un exemple de service créé pour mettre à jour les balises meta destinées à l’OpenGraph et à Twitter.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="javascript"><span></span><span class="tok-err">@</span><span class="tok-nx">Injectable</span><span class="tok-p">({</span>
  <span class="tok-nx">providedIn</span><span class="tok-o">:</span> <span class="tok-s1">&#39;root&#39;</span>
<span class="tok-p">})</span>
<span class="tok-k">export</span> <span class="tok-kd">class</span> <span class="tok-nx">SeoService</span> <span class="tok-p">{</span>

  <span class="tok-kr">constructor</span><span class="tok-p">(</span><span class="tok-kr">private</span> <span class="tok-nx">meta</span><span class="tok-o">:</span> <span class="tok-nx">Meta</span><span class="tok-p">,</span>
              <span class="tok-kr">private</span> <span class="tok-nx">title</span><span class="tok-o">:</span> <span class="tok-nx">Title</span><span class="tok-p">)</span> <span class="tok-p">{</span>
  <span class="tok-p">}</span>

  <span class="tok-nx">generateTags</span><span class="tok-p">(</span><span class="tok-nx">config</span><span class="tok-p">)</span> <span class="tok-p">{</span>
    <span class="tok-c1">// default values</span>
    <span class="tok-nx">config</span> <span class="tok-o">=</span> <span class="tok-p">{</span>
      <span class="tok-nx">title</span><span class="tok-o">:</span> <span class="tok-s1">&#39;Titre de la page&#39;</span><span class="tok-p">,</span>
      <span class="tok-nx">description</span><span class="tok-o">:</span> <span class="tok-s1">&#39;Description de la page par défaut&#39;</span><span class="tok-p">,</span>
      <span class="tok-nx">image</span><span class="tok-o">:</span> <span class="tok-s1">&#39;http://imagepardefaut.com&#39;</span><span class="tok-p">,</span>
      <span class="tok-p">...</span><span class="tok-nx">config</span>
    <span class="tok-p">};</span>

    <span class="tok-k">this</span><span class="tok-p">.</span><span class="tok-nx">meta</span><span class="tok-p">.</span><span class="tok-nx">updateTag</span><span class="tok-p">({</span><span class="tok-nx">name</span><span class="tok-o">:</span> <span class="tok-s1">&#39;twitter:card&#39;</span><span class="tok-p">,</span> <span class="tok-nx">content</span><span class="tok-o">:</span> <span class="tok-s1">&#39;summary&#39;</span><span class="tok-p">});</span>
    <span class="tok-k">this</span><span class="tok-p">.</span><span class="tok-nx">meta</span><span class="tok-p">.</span><span class="tok-nx">updateTag</span><span class="tok-p">({</span><span class="tok-nx">name</span><span class="tok-o">:</span> <span class="tok-s1">&#39;twitter:site&#39;</span><span class="tok-p">,</span> <span class="tok-nx">content</span><span class="tok-o">:</span> <span class="tok-s1">&#39;@twitter&#39;</span><span class="tok-p">});</span>
    <span class="tok-k">this</span><span class="tok-p">.</span><span class="tok-nx">meta</span><span class="tok-p">.</span><span class="tok-nx">updateTag</span><span class="tok-p">({</span><span class="tok-nx">name</span><span class="tok-o">:</span> <span class="tok-s1">&#39;twitter:title&#39;</span><span class="tok-p">,</span> <span class="tok-nx">content</span><span class="tok-o">:</span> <span class="tok-nx">config</span><span class="tok-p">.</span><span class="tok-nx">title</span><span class="tok-p">});</span>
    <span class="tok-k">this</span><span class="tok-p">.</span><span class="tok-nx">meta</span><span class="tok-p">.</span><span class="tok-nx">updateTag</span><span class="tok-p">({</span><span class="tok-nx">name</span><span class="tok-o">:</span> <span class="tok-s1">&#39;twitter:description&#39;</span><span class="tok-p">,</span> <span class="tok-nx">content</span><span class="tok-o">:</span> <span class="tok-nx">config</span><span class="tok-p">.</span><span class="tok-nx">description</span><span class="tok-p">});</span>
    <span class="tok-k">this</span><span class="tok-p">.</span><span class="tok-nx">meta</span><span class="tok-p">.</span><span class="tok-nx">updateTag</span><span class="tok-p">({</span><span class="tok-nx">name</span><span class="tok-o">:</span> <span class="tok-s1">&#39;twitter:image&#39;</span><span class="tok-p">,</span> <span class="tok-nx">content</span><span class="tok-o">:</span> <span class="tok-nx">config</span><span class="tok-p">.</span><span class="tok-nx">image</span><span class="tok-p">});</span>

    <span class="tok-k">this</span><span class="tok-p">.</span><span class="tok-nx">meta</span><span class="tok-p">.</span><span class="tok-nx">updateTag</span><span class="tok-p">({</span><span class="tok-nx">property</span><span class="tok-o">:</span> <span class="tok-s1">&#39;og:type&#39;</span><span class="tok-p">,</span> <span class="tok-nx">content</span><span class="tok-o">:</span> <span class="tok-s1">&#39;article&#39;</span><span class="tok-p">});</span>
    <span class="tok-k">this</span><span class="tok-p">.</span><span class="tok-nx">meta</span><span class="tok-p">.</span><span class="tok-nx">updateTag</span><span class="tok-p">({</span><span class="tok-nx">property</span><span class="tok-o">:</span> <span class="tok-s1">&#39;og:site_name&#39;</span><span class="tok-p">,</span> <span class="tok-nx">content</span><span class="tok-o">:</span> <span class="tok-s1">&#39;SiteName&#39;</span><span class="tok-p">});</span>
    <span class="tok-k">this</span><span class="tok-p">.</span><span class="tok-nx">meta</span><span class="tok-p">.</span><span class="tok-nx">updateTag</span><span class="tok-p">({</span><span class="tok-nx">property</span><span class="tok-o">:</span> <span class="tok-s1">&#39;og:title&#39;</span><span class="tok-p">,</span> <span class="tok-nx">content</span><span class="tok-o">:</span> <span class="tok-nx">config</span><span class="tok-p">.</span><span class="tok-nx">title</span><span class="tok-p">});</span>
    <span class="tok-k">this</span><span class="tok-p">.</span><span class="tok-nx">meta</span><span class="tok-p">.</span><span class="tok-nx">updateTag</span><span class="tok-p">({</span><span class="tok-nx">property</span><span class="tok-o">:</span> <span class="tok-s1">&#39;og:description&#39;</span><span class="tok-p">,</span> <span class="tok-nx">content</span><span class="tok-o">:</span> <span class="tok-nx">config</span><span class="tok-p">.</span><span class="tok-nx">description</span><span class="tok-p">});</span>
    <span class="tok-k">this</span><span class="tok-p">.</span><span class="tok-nx">meta</span><span class="tok-p">.</span><span class="tok-nx">updateTag</span><span class="tok-p">({</span><span class="tok-nx">property</span><span class="tok-o">:</span> <span class="tok-s1">&#39;og:image&#39;</span><span class="tok-p">,</span> <span class="tok-nx">content</span><span class="tok-o">:</span> <span class="tok-nx">config</span><span class="tok-p">.</span><span class="tok-nx">image</span><span class="tok-p">});</span>
    <span class="tok-k">this</span><span class="tok-p">.</span><span class="tok-nx">meta</span><span class="tok-p">.</span><span class="tok-nx">updateTag</span><span class="tok-p">({</span><span class="tok-nx">property</span><span class="tok-o">:</span> <span class="tok-s1">&#39;og:url&#39;</span><span class="tok-p">,</span> <span class="tok-nx">content</span><span class="tok-o">:</span> <span class="tok-sb">`https://monurl/`</span><span class="tok-p">});</span>

    <span class="tok-k">this</span><span class="tok-p">.</span><span class="tok-nx">title</span><span class="tok-p">.</span><span class="tok-nx">setTitle</span><span class="tok-p">(</span><span class="tok-nx">config</span><span class="tok-p">.</span><span class="tok-nx">title</span><span class="tok-p">);</span>
    <span class="tok-k">this</span><span class="tok-p">.</span><span class="tok-nx">meta</span><span class="tok-p">.</span><span class="tok-nx">addTags</span><span class="tok-p">([</span>
      <span class="tok-p">{</span><span class="tok-nx">name</span><span class="tok-o">:</span> <span class="tok-s1">&#39;description&#39;</span><span class="tok-p">,</span> <span class="tok-nx">content</span><span class="tok-o">:</span> <span class="tok-nx">config</span><span class="tok-p">.</span><span class="tok-nx">description</span><span class="tok-p">},</span>
      <span class="tok-p">{</span><span class="tok-nx">name</span><span class="tok-o">:</span> <span class="tok-s1">&#39;keywords&#39;</span><span class="tok-p">,</span> <span class="tok-nx">content</span><span class="tok-o">:</span> <span class="tok-nx">config</span><span class="tok-p">.</span><span class="tok-nx">description</span><span class="tok-p">},</span>
    <span class="tok-p">]);</span>
  <span class="tok-p">}</span>
<span class="tok-p">}</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_le_sitemap">Le Sitemap</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Une autre partie du <strong>SEO</strong> indispensable est le sitemap.
Il permet aux robots de savoir exactement quelles pages indexer.
Problème, sur une application comme <strong>We Guide</strong>, nous ne pouvons pas écrire ce fichier en dur, en effet, des nouveaux guides créent leur profil tous les jours sur la plateforme, ce qui veut dire, une nouvelle url en plus à indexer.</p>
</div>
<div class="paragraph">
<p>Pour remédier à cela c’est assez simple, il faut que le fichier soit dynamique et généré à la volée par votre serveur.
Pour faire cela, il suffit de servir une route <code>/sitemap</code> qui retourne un fichier <strong>XML</strong> généré à l’aide d’appel aux différents services de votre application.</p>
</div>
<div class="paragraph">
<p>Voici un exemple sur une application <strong>Spring Boot</strong> en <strong>Kotlin</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-nd">@Component</span>
<span class="tok-kd">class</span> <span class="tok-nf">SitemapView</span><span class="tok-p">(</span><span class="tok-nd">@Autowired</span> <span class="tok-n">val</span> <span class="tok-n">sitemapService</span><span class="tok-p">:</span> <span class="tok-n">SitemapService</span><span class="tok-p">)</span> <span class="tok-p">:</span> <span class="tok-n">AbstractView</span><span class="tok-p">()</span> <span class="tok-p">{</span>
    <span class="tok-n">override</span> <span class="tok-n">fun</span> <span class="tok-nf">renderMergedOutputModel</span><span class="tok-p">(</span><span class="tok-n">model</span><span class="tok-p">:</span> <span class="tok-n">MutableMap</span><span class="tok-o">&lt;</span><span class="tok-n">String</span><span class="tok-p">,</span> <span class="tok-n">Any</span><span class="tok-o">&gt;?</span><span class="tok-p">,</span>
                                         <span class="tok-n">request</span><span class="tok-p">:</span> <span class="tok-n">HttpServletRequest</span><span class="tok-o">?</span><span class="tok-p">,</span>
                                         <span class="tok-n">response</span><span class="tok-p">:</span> <span class="tok-n">HttpServletResponse</span><span class="tok-o">?</span><span class="tok-p">)</span> <span class="tok-p">{</span>
        <span class="tok-n">response</span><span class="tok-o">?</span><span class="tok-p">.</span><span class="tok-na">contentType</span> <span class="tok-o">=</span> <span class="tok-n">APPLICATION_XML_VALUE</span>
        <span class="tok-n">response</span><span class="tok-o">?</span><span class="tok-p">.</span><span class="tok-na">writer</span><span class="tok-o">?</span><span class="tok-p">.</span><span class="tok-na">append</span><span class="tok-p">(</span><span class="tok-n">sitemapService</span><span class="tok-p">.</span><span class="tok-na">createSitemap</span><span class="tok-p">())</span>
    <span class="tok-p">}</span>
<span class="tok-p">}</span>

<span class="tok-nd">@RestController</span>
<span class="tok-kd">class</span> <span class="tok-nf">SitemapController</span><span class="tok-p">(</span><span class="tok-nd">@Autowired</span> <span class="tok-n">val</span> <span class="tok-n">sitemapView</span><span class="tok-p">:</span> <span class="tok-n">SitemapView</span><span class="tok-p">)</span> <span class="tok-p">{</span>
    <span class="tok-nd">@GetMapping</span><span class="tok-p">(</span><span class="tok-s">&#34;/sitemap&#34;</span><span class="tok-p">,</span> <span class="tok-n">produces</span> <span class="tok-o">=</span> <span class="tok-n">arrayOf</span><span class="tok-p">(</span><span class="tok-n">APPLICATION_XML_VALUE</span><span class="tok-p">))</span>
    <span class="tok-n">fun</span> <span class="tok-nf">generateSiteMap</span><span class="tok-p">():</span> <span class="tok-n">SitemapView</span> <span class="tok-p">{</span>
        <span class="tok-k">return</span> <span class="tok-n">sitemapView</span>
    <span class="tok-p">}</span>
<span class="tok-p">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Pour générer le fichier <strong>XML</strong>, nous avons utilisé cette librairie <a href="https://github.com/lgraubner/sitemap-generator" target="_blank" rel="noopener">https://github.com/lgraubner/sitemap-generator</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_le_rendu_côté_serveur">Le rendu côté serveur</h2>
<div class="sectionbody">
<div class="paragraph">
<p>La dernière étape est la plus compliquée.
Il faut ajouter une logique au niveau du serveur front qui, si l’appel vient d’un robot, le redirige vers un service permettant de générer le code <strong>HTML</strong> final de notre page car le problème des robots c’est que un, ils n’aiment pas le javascript (le moteur utilisé n’est pas récent) et deux, ils n’aiment pas attendre.</p>
</div>
<div class="paragraph">
<p>Le service en question que nous avons choisi se nomme <strong>Rendertron</strong> (<a href="https://github.com/GoogleChrome/rendertron" target="_blank" rel="noopener">https://github.com/GoogleChrome/rendertron</a>). Ce n’est rien d’autre qu’un <strong>Google Chrome</strong> headless auquel on envoie l’url de la page que l’on désire et nous renvoie le code <strong>HTML</strong> en réponse.</p>
</div>
<div class="paragraph">
<p>Pour décider si l’on doit faire du rendu côté serveur ou du rendu côté client, nous nous sommes inspirés d’une librairie Java <a href="https://github.com/greengerong/prerender-java" target="_blank" rel="noopener">https://github.com/greengerong/prerender-java</a>.
Cette librairie fournit directement un filtre <strong>HTTP</strong> permettant de rediriger vers une url si le <code>User-Agent</code> est compris dans la liste des robots de crawling.</p>
</div>
<div class="paragraph">
<p>Il nous a suffit de brancher ce filtre au niveau de <strong>Spring Boot</strong> comme ceci :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-nd">@Bean</span>
<span class="tok-kd">public</span> <span class="tok-n">FilterRegistrationBean</span> <span class="tok-nf">registerSeoFilter</span><span class="tok-p">()</span> <span class="tok-p">{</span>
    <span class="tok-n">PreRenderSEOFilter</span> <span class="tok-n">seoFilter</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-n">PreRenderSEOFilter</span><span class="tok-p">();</span>
    <span class="tok-n">FilterRegistrationBean</span> <span class="tok-n">filterRegistrationBean</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-n">FilterRegistrationBean</span><span class="tok-p">();</span>

    <span class="tok-n">filterRegistrationBean</span><span class="tok-p">.</span><span class="tok-na">setFilter</span><span class="tok-p">(</span><span class="tok-n">seoFilter</span><span class="tok-p">);</span>
    <span class="tok-n">filterRegistrationBean</span><span class="tok-p">.</span><span class="tok-na">addInitParameter</span><span class="tok-p">(</span>
        <span class="tok-s">&#34;prerenderServiceUrl&#34;</span><span class="tok-p">,</span>
        <span class="tok-n">env</span><span class="tok-p">.</span><span class="tok-na">getProperty</span><span class="tok-p">(</span><span class="tok-s">&#34;application.rendertron.url&#34;</span><span class="tok-p">)</span><span class="tok-o">+</span><span class="tok-s">&#34;/render&#34;</span><span class="tok-p">);</span>

    <span class="tok-n">filterRegistrationBean</span><span class="tok-p">.</span><span class="tok-na">addUrlPatterns</span><span class="tok-p">(</span><span class="tok-s">&#34;/*&#34;</span><span class="tok-p">);</span>

    <span class="tok-k">return</span> <span class="tok-n">filterRegistrationBean</span><span class="tok-p">;</span>
<span class="tok-p">}</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_validation">Validation</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Une fois que vous avez fait toutes vos modifications, vous pouvez tester le bon fonctionnement grâce à plusieurs outils :</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://cards-dev.twitter.com/validator" target="_blank" rel="noopener">https://cards-dev.twitter.com/validator</a> : le système de <strong>Twitter</strong> pour vérifier l’aperçu d’un lien quand on le partage dans un tweet.</p>
</li>
<li>
<p><a href="https://search.google.com/search-console" target="_blank" rel="noopener">https://search.google.com/search-console</a> : la <strong>Google Search Console</strong>, l’outil de <strong>Google</strong> vous permet de voir le <strong>HTML</strong> ou même une capture d’écran d’une URL de votre site de la façon dont voit le robot d’indexation de <strong>Google</strong>. Il vous permet aussi de consulter le sitemap et voir si ses urls ont bien été indexées.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Enfin vous n’avez plus qu’à attendre quelques jours que les différents robots passent sur votre site afin de voir les résultats sur les différents moteurs de recherche.</p>
</div>
<div class="paragraph">
<p>Pour <strong>We Guide</strong>, nous sommes actuellement entrain de tester cette amélioration sur notre plateforme de recette et on espère déployer la version de production très prochainement.</p>
</div>
</div>
</div>

                    </div>
                    <div class="content-footer">
                        
                        <ul class="tags float">
                            
                            <li><a href="../../../../tags/seo/">SEO</a></li>
                            
                            <li><a href="../../../../tags/angular/">Angular</a></li>
                            
                        </ul>
                        
                        <section id="author">
                            <div class="date">Rédigé par <span class="author-name">Benjamin</span></div>
                        </section>
                    </div>
                    <div class="share">
                        <span>Partager</span>
                        <ul class="socials">
                            <li>
                                <a target="_blank" title="Facebook"
                                   href="https://www.facebook.com/sharer.php?u=http://code-troopers.com%2f2018%2f09%2f18%2fangular-seo%2f&t=SEO%20et%20Single%20Page%20Application"
                                   class="facebook-button" rel="nofollow"
                                   onclick="javascript:window.open(this.href, '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=500,width=700');return false;">
                                    <i class="fa fa-facebook"></i>
                                </a>
                            </li>
                            <li>
                                <a target="_blank" title="Twitter"
                                   href="https://twitter.com/share?url=http://code-troopers.com%2f2018%2f09%2f18%2fangular-seo%2f&text=SEO%20et%20Single%20Page%20Application&via=codetroopers"
                                   rel="nofollow"
                                   onclick="javascript:window.open(this.href, '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=400,width=700');return false;">
                                    <i class="fa fa-twitter"></i>
                                </a>
                            </li>
                            <li>
                                <a target="_blank" title="Google +"
                                   href="https://plus.google.com/share?url=http://code-troopers.com%2f2018%2f09%2f18%2fangular-seo%2f&hl=fr"
                                   class="google-button" rel="nofollow"
                                   onclick="javascript:window.open(this.href, '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=450,width=650');return false;">
                                    <i class="fa fa-google-plus"></i>
                                </a>
                            </li>
                        </ul>
                    </div>
                    <div style="clear:both"></div>


                    <div class="back">
                        <div class="pagination">
                            
                            <a href="../../../../2018/11/14/android-deobfuscation/" class="previous-page">
                                <div class="arrow"><div class="arrow_box_left arrow_box">
</div></div>
                                Article précédent
                            </a>
                            
                            
                            <a href="../../../../2018/07/09/jq/" class="next-page">
                                Article suivant
                                <div class="arrow"><div class="arrow_box_right arrow_box">
</div></div>
                            </a>
                            
                        </div>
                    </div>

                    <section id="menu">
                        <ul>
                            
                        </ul>
                    </section>

                    <div id="disqus_thread"></div>
                    <script type="text/javascript">
                         
                        var disqus_shortname = 'codetroopers' 
                        var disqus_url = window.location.href
                        if (window.location.protocol != 'http:') {
                            disqus_url = 'http:' + window.location.href.substring(window.location.protocol.length)
                        }

                         
                        (function () {
                            var dsq = document.createElement('script')
                            dsq.type = 'text/javascript'
                            dsq.async = true
                            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq)
                        })()
                    </script>
                    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments
                        powered by Disqus.</a></noscript>
                    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span
                            class="logo-disqus">Disqus</span></a>
                </div>
            </article>
        </div>
    </section>
</section>

<section id="contact">
    <h1>Contact</h1>


    <div>
        <div><iframe class="lozad"
                    width="100%"
                    height="100%"
                    frameborder="0" style="border:0"
                    data-src="https://www.google.com/maps/embed/v1/place?key=AIzaSyDmneK7ppr9MWdY2ynnTXsnhEloW2r7GzQ&q=Code-Troopers,+37000+Tours+France&zoom=15">
            </iframe></div>
        <div>
            <h2>Code-Troopers</h2>
            <p>
                26 bis rue Abraham Bosse<br>
                37000 Tours - Fr
            </p>
            <p>
                <a href="mailto:contact@code-troopers.com">contact@code-troopers.com</a>
            </p>
            <p>
                <a class="button" href="tel:+33782287216">07 82 28 72 16</a>
            </p>
        </div>
    </div>

    <h1>Suivez nos actualités</h1>

    <ul class="flex">
        <li>
            <a href="https://facebook.com/codetroopers37">
                <i class="fa fa-facebook fa-3x fa-fw"></i>
            </a>
        </li>
        <li>
            <a href="https://twitter.com/codetroopers">
                <i class="fa fa-twitter fa-3x fa-fw"></i>
            </a>
        </li>
        <li>
            <a href="https://github.com/code-troopers">
                <i class="fa fa-github fa-3x fa-fw"></i>
            </a>
        </li>
        <li>
            <a href="../../../../index.xml">
                <i class="fa fa-rss fa-3x fa-fw"></i>
            </a>
        </li>
    </ul>
</section>

<footer>
    <div class="wrapper">
        <a href="#top" class="scroll-to-top">
            <img class="arrow" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAA2CAYAAADOBhlKAAAAhElEQVR42u3TOw0AIRBF0ZWABKQgBSlIQAJSkIIEHLwNBZmCZfiUm3eT6cgZCngAaGPaaGdWQGxzC1hI9gZIkNIp4DDmToCMsbwLOMxzO0BRgLICPNb5GWCG7fNbmC8gYL8ggGyv2K/2W8iTPS92wOI+q3+mnnKGAAECBAgQIECAwC+BF8FrydFpGvcOAAAAAElFTkSuQmCC" alt="arrow">
        </a>
        <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAALQAAAC0CAMAAAAKE/YAAAAAM1BMVEVHcEz////////////////////////////////////////////////////////////////P0YphAAAAEXRSTlMAIEBwgLDA/6DQEFCQ4GAw8MRg8BIAAASTSURBVHgB7NmBavMqGIfxv8b4qInq/V/tgQ/kfIXTnG5JWoU+AB0dY7+9eS0s0ZUZu7jVex7yfnWLNRowu4TIYTEsVsOUtr17yX51rti/Ks6tPtPl+5b08aqLneu2qqfVzXV6dPWj4j33+Rm9kOnXJO8fchuXAVooST8oldAAsjN6d8X3if3+CvmiN5ZcBlqw+nU2NCC7pPdk9gbEknSqVCLQdvMOcgAIVhdkA0C4m51c/zVXjuDeJVka4NLlY2iL7spmIJhbFi5b3VFaAW90Q8YDa7pnM7K97yLesCPJAy7dfMJ90oVtDWLVrdUIbdNVpR1wuj0H7EmXZCLkqjdUM0Rz1WqEpLeUwjUrsgBFb6sAi04WoFW9sdognP6ki0lvLUXw6dzPh6Q3l8KZSZkIQR/ohLo2KPpIBVo9b55DnT5n7mrzmzNYpI+qYzprnkDtP2vuaq8fFCDoA51RLJ83d/WiF9sgJg1QirDppUyjJQ1RajTz6p9XNUj1xYu+Q9EwFdhfWuiggQqwvbBFOWmgUv7/E+ahaqgqeB22gNNgOViOl4Oo4YrHC7L+djl4sd8uyKqnWXAaDy0HVs/K5DQiOmXywSm0GhGtDZanp9BrTLT8s7PowIyKNuCevB80KloBzPHbA6GPR2rAncfegT9Y3h3SyOgE+398dASNjFagpePpD4Q+2N9M0NhoBbIeKmBHR1so+jtP1OhoRfzjvlDGR5fHc+do6Tz2bnxquDPHkIs6cRQr2BnQFqp6O1kzoJXZH76eAP0w3Qp1AvSj1NE0B1r/fn5EwizoQNSfEpTfom/5/kEFUv9XN82CTv0e6k7ULGhF9v46D7pPGLZ50BtIkgUzD9qAleTImgetzCIp4GdCe4KkiLsOzZOuQztiP4fzoDeQDNSZ0BWMLGgmtMBqIc+Fzixy+LnQHqeVdSr0H7DHzYV2+BPoM51EQ5kLXUBg50LbUdBf9Bf9RdfT2PPdOmnu6Yv+or/oMhe6gDxuLrTDn0cfIm5Cr6xTof+AHX4utMdpIc+FziyyMBcarAzUmdAVjATbTOgNJEXcTGhH/OlNdXoX3VTv/fSm+kKeCZ1Z+oOiWdD9QZFgmwe9QX/4OQ96J/bXedB9whukWdCp7/I/xNwBBsAwGMXgC/T+5y3wAPj4CTAMMR1K8kSdCKGnTqCk0l8CJqlMB+qhQQcC8SqGHukUtx5aFLc9h9AuE07b7KBd25wgG0K7qz4VOYN2Fdml71NYl76n14fQrtcvZOigPWTYr1hAo6cOcU4OvTgHMqgcehkUBGc19IIzTPt66LfzaxElQMN7EFFCrlpD75NCGFxD7/BCgp1DL8GG2L2GXuwOswI99GYFYMChh96AA0xl9NC/vTu0AQAEgiAY7CPov1vkubNkEraQnawy/CkJvX8xRzvK0giYR4mbLnKIJq7nzMmfv1P0x5X+ItScsVLb27TeD4bHXznb0+zegHtyYwQPLPd93MBnJHyww6JRAIQG4H4AWAkgrHYIKx8L81k2H8DzqUEfdfT5TBoqRUlYFd9FmWMVlO509+l090fSAY7+AkvG2mAzLke+AAAAAElFTkSuQmCC" alt="logo">
        <div>
            <span>©2014 — 2022 Code-Troopers | <a href="../../../../legals.html">Mentions légales</a></span>
            <span>Design : <a href="https://www.descheval.com/">descheval.com</a> | Développement : Code-Troopers</span>
        </div>
    </div>
</footer>
<script type="application/javascript" src="../../../../main.32803c.js"></script>

<script type="application/javascript" src="../../../../blog.499878.js"></script>

</body>
</html>

